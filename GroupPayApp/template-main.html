<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title>GroupPay</title>
	<link rel="stylesheet" type="text/css" href="css/mui.min.css"/>
	<style type="text/css">
		.mui-content {
			font-size: 0.8em;
			color: gray;
			text-align: center;
		}
	</style>
</head>
<body>
	<div class="mui-content">
		<div style="margin-top: 70px;" class="mui-loading">
			<span class="mui-icon mui-spinner"></span>
			<br />
			<span>正在加载</span>
		</div>
	</div>	
	
	<script src="js/mui.min.js" charset="UTF-8"></script>
	<script type="text/javascript" charset="UTF-8">
		mui.init({
			swipeBack:true
		});
		
		var contentWebview = null; 
		var self = null;
		mui.plusReady(function(){
			self = plus.webview.currentWebview();
			
			//接收templateFire事件
			window.addEventListener('templateFire',function(options){
				var id = options.detail.id;//not use
				var aniShow = options.detail.aniShow;
				var href = options.detail.target;
				
				if (mui.os.android&&aniShow&&parseFloat(mui.os.version)>=4.4) {
					if (contentWebview == null) {
						contentWebview = self.children()[0];
					}
				
					var str = contentWebview.getURL();
					if (str) {
						var index = str.indexOf('www/');
						str = str.substring(index+4);
					}
					if (contentWebview.getURL() == href || (str && str == href)) {
						console.log("loaded");
						contentWebview.show();
					}else {
						console.log("new load" + href);
						contentWebview.loadURL(href);
					}
					self.show(aniShow);
				}
			},false);
		});
	</script>
</body>
</html>